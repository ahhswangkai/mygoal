# 足球数据展示Web服务使用说明

## 📋 功能介绍

这是一个基于Flask的Web服务，用于展示爬取的足球比赛数据。提供了美观的界面和丰富的功能。

## 🚀 快速启动

### 方法1：使用启动脚本（推荐）
```bash
./start_web.sh
```

### 方法2：直接运行
```bash
python3 web_app.py
```

服务启动后，访问地址：**http://127.0.0.1:5001**

## 🎯 主要功能

### 1. 首页 - 比赛列表展示
- **地址**：`http://127.0.0.1:5001/`
- **功能**：
  - 📊 展示所有比赛数据（卡片式布局）
  - 🔍 按联赛筛选比赛
  - 🎯 按状态筛选（未开始/进行中/完场）
  - 🔄 刷新数据按钮
  - 📥 一键爬取新数据
  - 📈 顶部统计栏显示总比赛数、联赛数、已完场比赛数

### 2. 比赛详情页
- **地址**：`http://127.0.0.1:5001/match/{match_id}`
- **功能**：
  - 🏆 显示比赛基本信息（联赛、时间、对阵双方）
  - 📊 显示详细赔率数据：
    - 欧赔（胜平负）- 即时盘+初盘
    - 亚盘（让球）- 即时盘+初盘
    - 大小球 - 即时盘+初盘
  - 🔍 如无赔率数据，可一键爬取该场比赛的赔率

### 3. 数据统计页
- **地址**：`http://127.0.0.1:5001/stats`
- **功能**：
  - 📊 总体统计数据展示
  - 📈 按状态统计柱状图
  - 📊 按联赛统计柱状图（显示前10）

## 🔌 API接口

### 获取比赛列表
```
GET /api/matches
参数：
  - league: 联赛名称（可选）
  - status: 比赛状态（可选）
响应：
{
  "success": true,
  "data": [...],
  "count": 数量
}
```

### 获取比赛详情
```
GET /api/match/{match_id}
响应：
{
  "success": true,
  "data": {...}
}
```

### 获取联赛列表
```
GET /api/leagues
响应：
{
  "success": true,
  "data": ["英超", "西甲", ...]
}
```

### 获取统计信息
```
GET /api/stats
响应：
{
  "success": true,
  "data": {
    "total_matches": 100,
    "total_leagues": 10,
    "status_stats": {...},
    "league_stats": {...}
  }
}
```

### 爬取新数据
```
GET /api/crawl
响应：
{
  "success": true,
  "message": "成功爬取 XX 场比赛",
  "count": XX
}
```

### 爬取赔率数据
```
GET /api/crawl_odds/{match_id}
响应：
{
  "success": true,
  "data": {...}
}
```

## 📁 数据来源

Web服务会自动读取 `data/` 目录下最新的比赛数据JSON文件，支持以下文件：
- `matches_*.json` - 比赛数据
- `combined_*.json` - 比赛+赔率组合数据

## 🎨 界面特性

- ✅ 响应式设计，支持移动端
- ✅ 渐变色彩方案，美观大方
- ✅ 卡片式布局，信息清晰
- ✅ 动画效果，交互流畅
- ✅ 即时数据更新
- ✅ 状态标签颜色区分（未开始/进行中/完场）

## 🛠️ 技术栈

- **后端**：Flask 2.0.3
- **前端**：原生HTML/CSS/JavaScript
- **数据处理**：pandas, json
- **爬虫集成**：调用crawler.py模块

## 📝 注意事项

1. 首次使用需要确保已安装Flask依赖：
   ```bash
   python3 -m pip install flask==2.0.3 werkzeug==2.0.3
   ```

2. 确保 `data/` 目录下有数据文件，可以通过以下方式获取数据：
   - 运行爬虫程序生成数据
   - 使用Web界面的"爬取新数据"按钮

3. 端口5001被占用时，可在 `web_app.py` 中修改端口号

4. 开发环境下使用，生产环境建议使用WSGI服务器（如gunicorn）

## 🎯 使用流程示例

1. 启动Web服务：`./start_web.sh`
2. 浏览器访问：`http://127.0.0.1:5001`
3. 点击"爬取新数据"按钮获取最新比赛
4. 使用筛选器查看特定联赛或状态的比赛
5. 点击比赛卡片查看详细信息和赔率
6. 访问统计页面查看数据分析

## 🔄 更新日志

- **v1.0** (2025-12-01)
  - ✅ 实现比赛列表展示
  - ✅ 实现比赛详情页
  - ✅ 实现数据统计页
  - ✅ 集成爬虫功能
  - ✅ 支持筛选和搜索
  - ✅ 美化界面设计

## 📧 问题反馈

如有问题或建议，请联系开发团队。
