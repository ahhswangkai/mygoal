<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯”èµ›è¯¦æƒ…</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .back-btn {
            background: white;
            color: #667eea;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .detail-card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .match-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .league-badge {
            background: #667eea;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .match-time {
            color: #718096;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .teams-display {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 40px 0;
        }
        
        .team-section {
            flex: 1;
            text-align: center;
        }
        
        .team-name {
            font-size: 28px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .team-score {
            font-size: 48px;
            font-weight: bold;
            color: #667eea;
        }
        
        .vs-separator {
            font-size: 24px;
            color: #cbd5e0;
            font-weight: bold;
        }
        
        .odds-section {
            margin-top: 40px;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .odds-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .odds-card {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .odds-type {
            font-size: 16px;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 15px;
        }
        
        .odds-row {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .odds-label {
            color: #718096;
        }
        
        .odds-value {
            color: #2d3748;
            font-weight: 600;
        }
        
        .loading {
            text-align: center;
            padding: 60px;
            color: #667eea;
            font-size: 18px;
        }
        
        .crawl-btn {
            background: #48bb78;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            margin-top: 20px;
        }
        
        .crawl-btn:hover {
            background: #38a169;
        }
        
        .crawl-btn:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 0;
            }
            .detail-card {
                padding: 20px;
                border-radius: 12px;
            }
            .teams-display {
                flex-direction: column;
                gap: 10px;
                margin: 20px 0;
            }
            .vs-separator {
                margin: 10px 0;
                font-size: 20px;
            }
            .team-name {
                font-size: 20px;
                margin-bottom: 5px;
            }
            .team-score {
                font-size: 32px;
            }
            .odds-grid {
                grid-template-columns: 1fr;
            }
            .match-header {
                margin-bottom: 20px;
                padding-bottom: 15px;
            }
            .back-btn {
                margin-bottom: 10px;
                padding: 8px 15px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="/" class="back-btn">â† è¿”å›åˆ—è¡¨</a>
        
        <div class="detail-card">
            <div id="matchDetail" class="loading">
                åŠ è½½ä¸­...
            </div>
        </div>
        <div class="detail-card" style="margin-top:20px;">
            <div class="section-title">ğŸ“Š AIé¢„æµ‹</div>
            <div id="predictionSection" class="loading">åŠ è½½ä¸­...</div>
        </div>
        <div class="detail-card" style="margin-top:20px;">
            <div class="section-title">ğŸ“ˆ èµ”ç‡å˜åŠ¨</div>
            <div id="movementSection" class="loading">åŠ è½½ä¸­...</div>
        </div>
    </div>

    <script>
        const matchId = "{{ match_id }}";
        
        window.onload = function() {
            loadMatchDetail();
            loadPrediction();
            loadMovement();
        };
        
        async function loadMatchDetail() {
            try {
                const response = await fetch(`/api/match/${matchId}`);
                const result = await response.json();
                
                if (result.success) {
                    displayMatchDetail(result.data);
                } else {
                    document.getElementById('matchDetail').innerHTML = 
                        '<p style="color: #e53e3e;">åŠ è½½å¤±è´¥: ' + result.message + '</p>';
                }
            } catch (error) {
                document.getElementById('matchDetail').innerHTML = 
                    '<p style="color: #e53e3e;">åŠ è½½å¤±è´¥: ' + error.message + '</p>';
            }
        }
        
        async function loadMovement() {
            try {
                const res = await fetch(`/api/match/${matchId}/movement`);
                const result = await res.json();
                const el = document.getElementById('movementSection');
                if (!el) return;
                if (!result.success) {
                    el.innerHTML = '<p style="color:#e53e3e;">åŠ è½½å¤±è´¥: ' + (result.message || '') + '</p>';
                    return;
                }
                const data = result.data || {};
                let html = '';
                if (data.euro) {
                    const m = data.euro.movement;
                    html += `
                        <div class="odds-section">
                            <div class="section-title">æ¬§èµ”å˜åŠ¨</div>
                            <div class="odds-card">
                                <div class="odds-row"><span class="odds-label">åˆç›˜:</span><span class="odds-value">${data.euro.initial.win}/${data.euro.initial.draw}/${data.euro.initial.lose}</span></div>
                                <div class="odds-row"><span class="odds-label">å³æ—¶:</span><span class="odds-value">${data.euro.current.win}/${data.euro.current.draw}/${data.euro.current.lose}</span></div>
                                <div class="odds-row"><span class="odds-label">å˜åŒ–:</span><span class="odds-value">èƒœ${m.win.dir}${m.win.change}ï¼Œå¹³${m.draw.dir}${m.draw.change}ï¼Œè´Ÿ${m.lose.dir}${m.lose.change}</span></div>
                                ${data.euro.tendency ? `<div class="odds-row"><span class="odds-label">å€¾å‘:</span><span class="odds-value">${data.euro.tendency}</span></div>` : ''}
                            </div>
                        </div>
                    `;
                }
                if (data.asian) {
                    const m2 = data.asian.movement;
                    html += `
                        <div class="odds-section">
                            <div class="section-title">äºšç›˜å˜åŠ¨</div>
                            <div class="odds-card">
                                <div class="odds-row"><span class="odds-label">åˆç›˜:</span><span class="odds-value">${data.asian.initial.home} ${data.asian.initial.handicap} ${data.asian.initial.away}</span></div>
                                <div class="odds-row"><span class="odds-label">å³æ—¶:</span><span class="odds-value">${data.asian.current.home} ${data.asian.current.handicap} ${data.asian.current.away}</span></div>
                                <div class="odds-row"><span class="odds-label">å˜åŒ–:</span><span class="odds-value">ç›˜å£${m2.handicap ? (m2.handicap.dir + m2.handicap.change) : 'â€”'}ï¼Œä¸»æ°´${m2.home ? (m2.home.dir + m2.home.change) : 'â€”'}ï¼Œå®¢æ°´${m2.away ? (m2.away.dir + m2.away.change) : 'â€”'}</span></div>
                                ${data.asian.tendency ? `<div class="odds-row"><span class="odds-label">å€¾å‘:</span><span class="odds-value">${data.asian.tendency}</span></div>` : ''}
                            </div>
                        </div>
                    `;
                }
                el.innerHTML = html || '<p style="color:#718096;">æš‚æ— å˜åŠ¨æ•°æ®</p>';
            } catch (e) {
                const el = document.getElementById('movementSection');
                if (el) el.innerHTML = '<p style="color:#e53e3e;">åŠ è½½å¤±è´¥: ' + e.message + '</p>';
            }
        }

        function displayMatchDetail(match) {
            const hasOdds = match.euro_current_win || match.asian_current_handicap || match.ou_current_total || match.hi_handicap_value;
            
            const html = `
                <div class="match-header">
                    <div class="league-badge">${match.league || 'æœªçŸ¥è”èµ›'}</div>
                    <div class="match-time">æ¯”èµ›æ—¶é—´: ${match.match_time || 'æœªçŸ¥'}</div>
                    <div class="match-time">æ¯”èµ›ID: ${match.match_id}</div>
                </div>
                
                <div class="teams-display">
                    <div class="team-section">
                        <div class="team-name">${match.home_team || 'ä¸»é˜Ÿ'}</div>
                        <div class="team-score">${match.home_score || '-'}</div>
                    </div>
                    
                    <div class="vs-separator">VS</div>
                    
                    <div class="team-section">
                        <div class="team-name">${match.away_team || 'å®¢é˜Ÿ'}</div>
                        <div class="team-score">${match.away_score || '-'}</div>
                    </div>
                </div>
                
                ${hasOdds ? `
                    <div class="odds-section">
                        <div class="section-title">ğŸ“Š èµ”ç‡ä¿¡æ¯</div>
                        <div class="odds-grid">
                            ${match.euro_initial_win ? `
                                <div class="odds-card">
                                    <div class="odds-type">æ¬§èµ” (èƒœå¹³è´Ÿ)</div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - ä¸»èƒœ:</span>
                                        <span class="odds-value">${match.euro_current_win}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - å¹³å±€:</span>
                                        <span class="odds-value">${match.euro_current_draw}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - å®¢èƒœ:</span>
                                        <span class="odds-value">${match.euro_current_lose}</span>
                                    </div>
                                    ${match.euro_initial_win ? `
                                        <hr style="margin: 15px 0; border: none; border-top: 1px solid #e2e8f0;">
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - ä¸»èƒœ:</span>
                                            <span class="odds-value">${match.euro_initial_win}</span>
                                        </div>
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - å¹³å±€:</span>
                                            <span class="odds-value">${match.euro_initial_draw}</span>
                                        </div>
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - å®¢èƒœ:</span>
                                            <span class="odds-value">${match.euro_initial_lose}</span>
                                        </div>
                                    ` : ''}
                                </div>
                            ` : ''}
                            
                            ${match.asian_current_handicap ? `
                                <div class="odds-card">
                                    <div class="odds-type">äºšç›˜ (è®©çƒ)</div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - ä¸»é˜Ÿ:</span>
                                        <span class="odds-value">${match.asian_current_home_odds}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - ç›˜å£:</span>
                                        <span class="odds-value">${match.asian_current_handicap}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - å®¢é˜Ÿ:</span>
                                        <span class="odds-value">${match.asian_current_away_odds}</span>
                                    </div>
                                    ${match.asian_initial_handicap ? `
                                        <hr style="margin: 15px 0; border: none; border-top: 1px solid #e2e8f0;">
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - ä¸»é˜Ÿ:</span>
                                            <span class="odds-value">${match.asian_initial_home_odds}</span>
                                        </div>
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - ç›˜å£:</span>
                                            <span class="odds-value">${match.asian_initial_handicap}</span>
                                        </div>
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - å®¢é˜Ÿ:</span>
                                            <span class="odds-value">${match.asian_initial_away_odds}</span>
                                        </div>
                                    ` : ''}
                                </div>
                            ` : ''}
                            
                            ${match.ou_current_total ? `
                                <div class="odds-card">
                                    <div class="odds-type">å¤§å°çƒ</div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - å¤§çƒ:</span>
                                        <span class="odds-value">${match.ou_current_over_odds}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - ç›˜å£:</span>
                                        <span class="odds-value">${match.ou_current_total}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - å°çƒ:</span>
                                        <span class="odds-value">${match.ou_current_under_odds}</span>
                                    </div>
                                    ${match.ou_initial_total ? `
                                        <hr style="margin: 15px 0; border: none; border-top: 1px solid #e2e8f0;">
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - å¤§çƒ:</span>
                                            <span class="odds-value">${match.ou_initial_over_odds}</span>
                                        </div>
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - ç›˜å£:</span>
                                            <span class="odds-value">${match.ou_initial_total}</span>
                                        </div>
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - å°çƒ:</span>
                                            <span class="odds-value">${match.ou_initial_under_odds}</span>
                                        </div>
                                    ` : ''}
                                </div>
                            ` : ''}
                            
                            ${match.hi_handicap_value ? `
                                <div class="odds-card">
                                    <div class="odds-type">è®©çƒæŒ‡æ•° (ç«å½©å®˜æ–¹)</div>
                                    <div class="odds-row">
                                        <span class="odds-label">è®©çƒæ•°:</span>
                                        <span class="odds-value" style="font-weight:bold;color:#667eea;">${match.hi_handicap_value}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - ä¸»èƒœ:</span>
                                        <span class="odds-value">${match.hi_current_home_odds}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - å¹³å±€:</span>
                                        <span class="odds-value">${match.hi_current_draw_odds}</span>
                                    </div>
                                    <div class="odds-row">
                                        <span class="odds-label">å³æ—¶ç›˜ - å®¢èƒœ:</span>
                                        <span class="odds-value">${match.hi_current_away_odds}</span>
                                    </div>
                                    ${match.hi_initial_home_odds ? `
                                        <hr style="margin: 15px 0; border: none; border-top: 1px solid #e2e8f0;">
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - ä¸»èƒœ:</span>
                                            <span class="odds-value">${match.hi_initial_home_odds}</span>
                                        </div>
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - å¹³å±€:</span>
                                            <span class="odds-value">${match.hi_initial_draw_odds}</span>
                                        </div>
                                        <div class="odds-row">
                                            <span class="odds-label">åˆç›˜ - å®¢èƒœ:</span>
                                            <span class="odds-value">${match.hi_initial_away_odds}</span>
                                        </div>
                                    ` : ''}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                ` : `
                    <div style="text-align: center; padding: 30px; background: #f7fafc; border-radius: 10px;">
                        <p style="color: #718096; margin-bottom: 15px;">æš‚æ— èµ”ç‡æ•°æ®</p>
                        <button class="crawl-btn" onclick="crawlOdds()">ğŸ” çˆ¬å–èµ”ç‡æ•°æ®</button>
                    </div>
                `}
            `;
            
            document.getElementById('matchDetail').innerHTML = html;
        }
        
        async function loadPrediction() {
            try {
                const response = await fetch(`/api/predictions?limit=200`);
                const result = await response.json();
                
                const el = document.getElementById('predictionSection');
                if (!el) return;
                
                if (!result.success || !result.data || result.data.length === 0) {
                    el.innerHTML = `
                        <div style="text-align:center;padding:30px;background:#f7fafc;border-radius:10px;">
                            <p style="color:#718096;margin-bottom:15px;">æœªæ‰¾åˆ°AIé¢„æµ‹æ•°æ®</p>
                            <button class="crawl-btn" onclick="predictMatch()">ğŸ¤– ç”Ÿæˆé¢„æµ‹</button>
                        </div>
                    `;
                    return;
                }
                
                // æŸ¥æ‰¾å½“å‰æ¯”èµ›çš„é¢„æµ‹
                const pred = result.data.find(p => p.match_id === matchId);
                
                if (!pred) {
                    el.innerHTML = `
                        <div style="text-align:center;padding:30px;background:#f7fafc;border-radius:10px;">
                            <p style="color:#718096;margin-bottom:15px;">è¯¥æ¯”èµ›å°šæœªAIé¢„æµ‹</p>
                            <button class="crawl-btn" onclick="predictMatch()">ğŸ¤– ç”Ÿæˆé¢„æµ‹</button>
                        </div>
                    `;
                    return;
                }
                
                // æ˜¾ç¤ºé¢„æµ‹ç»“æœ
                const winMap = {'home': 'ä¸»èƒœ', 'draw': 'å¹³å±€', 'away': 'å®¢èƒœ'};
                const asianMap = {'home': 'ä¸»é˜Ÿ', 'away': 'å®¢é˜Ÿ'};
                const ouMap = {'over': 'å¤§çƒ', 'under': 'å°çƒ'};
                
                let html = `
                    <div class="odds-grid">
                        <div class="odds-card" style="border-left:4px solid #667eea;">
                            <div class="odds-type">ğŸ† èƒœè´Ÿé¢„æµ‹</div>
                            <div class="odds-row">
                                <span class="odds-label">é¢„æµ‹ç»“æœ:</span>
                                <span class="odds-value" style="color:#667eea;font-size:18px;">${winMap[pred.win_prediction]}</span>
                            </div>
                            <div class="odds-row">
                                <span class="odds-label">ç½®ä¿¡åº¦:</span>
                                <span class="odds-value">${pred.win_confidence.toFixed(1)}%</span>
                            </div>
                            ${pred.is_reviewed ? `
                                <div class="odds-row" style="margin-top:10px;padding-top:10px;border-top:1px solid #e2e8f0;">
                                    <span class="odds-label">å®é™…ç»“æœ:</span>
                                    <span class="odds-value" style="color:${pred.win_correct ? '#48bb78' : '#fc8181'};">${pred.win_correct ? 'âœ… æ­£ç¡®' : 'âŒ é”™è¯¯'}</span>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="odds-card" style="border-left:4px solid #48bb78;">
                            <div class="odds-type">âš–ï¸ äºšç›˜é¢„æµ‹</div>
                            <div class="odds-row">
                                <span class="odds-label">é¢„æµ‹ç»“æœ:</span>
                                <span class="odds-value" style="color:#48bb78;font-size:18px;">${asianMap[pred.asian_prediction]}</span>
                            </div>
                            <div class="odds-row">
                                <span class="odds-label">ç›˜å£:</span>
                                <span class="odds-value">${pred.asian_handicap || 'â€”'}</span>
                            </div>
                            <div class="odds-row">
                                <span class="odds-label">ç½®ä¿¡åº¦:</span>
                                <span class="odds-value">${pred.asian_confidence.toFixed(1)}%</span>
                            </div>
                            ${pred.is_reviewed ? `
                                <div class="odds-row" style="margin-top:10px;padding-top:10px;border-top:1px solid #e2e8f0;">
                                    <span class="odds-label">å®é™…ç»“æœ:</span>
                                    <span class="odds-value" style="color:${pred.asian_correct ? '#48bb78' : '#fc8181'};">${pred.asian_correct ? 'âœ… æ­£ç¡®' : 'âŒ é”™è¯¯'}</span>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="odds-card" style="border-left:4px solid #f6ad55;">
                            <div class="odds-type">âš½ å¤§å°çƒé¢„æµ‹</div>
                            <div class="odds-row">
                                <span class="odds-label">é¢„æµ‹ç»“æœ:</span>
                                <span class="odds-value" style="color:#f6ad55;font-size:18px;">${ouMap[pred.ou_prediction]}</span>
                            </div>
                            <div class="odds-row">
                                <span class="odds-label">ç›˜å£:</span>
                                <span class="odds-value">${pred.ou_total || 'â€”'}</span>
                            </div>
                            <div class="odds-row">
                                <span class="odds-label">ç½®ä¿¡åº¦:</span>
                                <span class="odds-value">${pred.ou_confidence.toFixed(1)}%</span>
                            </div>
                            ${pred.is_reviewed ? `
                                <div class="odds-row" style="margin-top:10px;padding-top:10px;border-top:1px solid #e2e8f0;">
                                    <span class="odds-label">å®é™…ç»“æœ:</span>
                                    <span class="odds-value" style="color:${pred.ou_correct ? '#48bb78' : '#fc8181'};">${pred.ou_correct ? 'âœ… æ­£ç¡®' : 'âŒ é”™è¯¯'}</span>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="odds-card" style="border-left:4px solid #9f7aea;">
                            <div class="odds-type">ğŸ¯ æ¯”åˆ†é¢„æµ‹</div>
                            <div class="odds-row">
                                <span class="odds-label">é¢„æµ‹æ¯”åˆ†:</span>
                                <span class="odds-value" style="color:#9f7aea;font-size:18px;">${pred.predicted_home_score}-${pred.predicted_away_score}</span>
                            </div>
                            ${pred.is_reviewed ? `
                                <div class="odds-row">
                                    <span class="odds-label">å®é™…æ¯”åˆ†:</span>
                                    <span class="odds-value">${pred.actual_home_score}-${pred.actual_away_score}</span>
                                </div>
                                <div class="odds-row" style="margin-top:10px;padding-top:10px;border-top:1px solid #e2e8f0;">
                                    <span class="odds-label">æ¯”åˆ†åŒ¹é…:</span>
                                    <span class="odds-value" style="color:${pred.score_correct ? '#48bb78' : '#fc8181'};">${pred.score_correct ? 'âœ… å®Œå…¨æ­£ç¡®' : 'âŒ ä¸åŒ¹é…'}</span>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                
                // å¦‚æœå·²å¤ç›˜ï¼Œæ˜¾ç¤ºæ€»ä½“ç»Ÿè®¡
                if (pred.is_reviewed) {
                    const accuracy = pred.accuracy || 0;
                    const bgColor = accuracy >= 75 ? '#d4f4dd' : accuracy >= 50 ? '#fef3c7' : '#fed7d7';
                    const textColor = accuracy >= 75 ? '#22543d' : accuracy >= 50 ? '#744210' : '#742a2a';
                    
                    html += `
                        <div style="margin-top:20px;padding:20px;background:${bgColor};border-radius:10px;border-left:4px solid ${textColor};">
                            <div style="font-size:18px;font-weight:bold;color:${textColor};margin-bottom:10px;">
                                ğŸ“ˆ å¤ç›˜ç»Ÿè®¡
                            </div>
                            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;">
                                <div>
                                    <div style="color:#718096;font-size:13px;">æ€»ä½“å‡†ç¡®åº¦</div>
                                    <div style="font-size:24px;font-weight:bold;color:${textColor};">${accuracy.toFixed(1)}%</div>
                                </div>
                                <div>
                                    <div style="color:#718096;font-size:13px;">å‘½ä¸­é¡¹ç›®</div>
                                    <div style="font-size:24px;font-weight:bold;color:${textColor};">${pred.correct_count}/${pred.total_predictions}</div>
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                el.innerHTML = html;
                
            } catch (error) {
                console.error('åŠ è½½AIé¢„æµ‹å¤±è´¥:', error);
                document.getElementById('predictionSection').innerHTML = `
                    <div style="text-align:center;padding:30px;">
                        <p style="color:#fc8181;">åŠ è½½å¤±è´¥: ${error.message}</p>
                    </div>
                `;
            }
        }
        
        async function predictMatch() {
            const btn = event.target;
            btn.disabled = true;
            btn.textContent = 'é¢„æµ‹ä¸­...';
            
            try {
                const response = await fetch(`/api/predict/${matchId}`);
                const result = await response.json();
                
                if (result.success) {
                    alert('AIé¢„æµ‹ç”ŸæˆæˆåŠŸï¼é¡µé¢å°†åˆ·æ–°ã€‚');
                    location.reload();
                } else {
                    alert('é¢„æµ‹å¤±è´¥: ' + result.message);
                    btn.disabled = false;
                    btn.textContent = 'ğŸ¤– ç”Ÿæˆé¢„æµ‹';
                }
            } catch (error) {
                alert('é¢„æµ‹å¤±è´¥: ' + error.message);
                btn.disabled = false;
                btn.textContent = 'ğŸ¤– ç”Ÿæˆé¢„æµ‹';
            }
        }
        
        async function crawlOdds() {
            const btn = event.target;
            btn.disabled = true;
            btn.textContent = 'çˆ¬å–ä¸­...';
            
            try {
                const response = await fetch(`/api/crawl_odds/${matchId}`);
                const result = await response.json();
                
                if (result.success) {
                    alert('èµ”ç‡æ•°æ®çˆ¬å–æˆåŠŸï¼é¡µé¢å°†åˆ·æ–°ã€‚');
                    location.reload();
                } else {
                    alert('çˆ¬å–å¤±è´¥: ' + result.message);
                    btn.disabled = false;
                    btn.textContent = 'ğŸ” çˆ¬å–èµ”ç‡æ•°æ®';
                }
            } catch (error) {
                alert('çˆ¬å–å¤±è´¥: ' + error.message);
                btn.disabled = false;
                btn.textContent = 'ğŸ” çˆ¬å–èµ”ç‡æ•°æ®';
            }
        }
    </script>
</body>
</html>
